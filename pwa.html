<html>
    
<link rel="manifest" href="/manifest.json">

<button id="installButton" style="display:none;">Instalar o App</button>
</html>
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                console.log('Service Worker registrado com sucesso:', registration);
            }, function(err) {
                console.log('Falha ao registrar o Service Worker:', err);
            });
        });
    }
</script>
<script>
    let deferredPrompt;
    const installButton = document.getElementById('installButton'); // Botão para instalação

    window.addEventListener('beforeinstallprompt', (e) => {
        // Previne o popup padrão
        e.preventDefault();
        deferredPrompt = e;
        // Mostra o botão para instalar o PWA
        installButton.style.display = 'block';
    });

    installButton.addEventListener('click', () => {
        // Oculta o botão de instalação
        installButton.style.display = 'none';
        // Mostra o popup de instalação do navegador
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('Usuário aceitou a instalação');
            } else {
                console.log('Usuário recusou a instalação');
            }
            deferredPrompt = null;
        });
    });
</script>
